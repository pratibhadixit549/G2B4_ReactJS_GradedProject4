{"ast":null,"code":"import _asyncToGenerator from\"E:/Full-Stack-Project/project-movie-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/Full-Stack-Project/project-movie-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"E:\\\\Full-Stack-Project\\\\project-movie-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from\"react\";import{Card}from\"react-bootstrap\";import{toast}from\"react-toastify\";import{addMovie,removeMovieById,getHigestMovieId,getMovieByTitle}from\"../../services/movies\";import\"../App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieListItem=function MovieListItem(_ref){var movies=_ref.movies,path=_ref.path,onRemove=_ref.onRemove;var toastTimeout=1800;var isFavouritePage=path===\"favourite\";var title=movies.title,poster=movies.poster;var toPath=\"\".concat(path,\"/\").concat(title);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAdded=_useState2[0],setIsAdded=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRemoved=_useState4[0],setIsRemoved=_useState4[1];var addMovieToFavourite=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var movieByTitle,highestId;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return getMovieByTitle(\"favourite\",movies.title);case 4:movieByTitle=_context.sent;if(!(movieByTitle!==null)){_context.next=8;break;}toast.error(\"Already added to Favourites...\",{autoClose:toastTimeout});return _context.abrupt(\"return\");case 8:_context.next=10;return getHigestMovieId(\"favourite\");case 10:highestId=_context.sent;movies.id=highestId+1;_context.next=14;return addMovie(\"favourite\",movies);case 14:toast.success(\"Successfully added to Favourites...\",{autoClose:toastTimeout});// Apply the 'added' class to the button and change heart color to yellow\nsetIsAdded(true);_context.next=21;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](1);toast.error(\"Not added to Favourites...\",{autoClose:toastTimeout});case 21:case\"end\":return _context.stop();}}},_callee,null,[[1,18]]);}));return function addMovieToFavourite(_x){return _ref2.apply(this,arguments);};}();var removeMovieFromFavourite=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_context2.prev=1;if(movies.id===null){toast.warn(\"Cannot find the Movie Id to remove from the favourite list...\");}_context2.next=5;return removeMovieById(\"favourite\",movies.id);case 5:data=_context2.sent;toast.success(\"Successfully removed from Favourites...\",{autoClose:toastTimeout});// Apply the 'removed' class to the button and change heart color to red\nsetIsRemoved(true);onRemove(movies.title);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](1);toast.error(\"Unable to remove from Favourites...\",{autoClose:toastTimeout});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[1,11]]);}));return function removeMovieFromFavourite(_x2){return _ref3.apply(this,arguments);};}();var handleCardClick=function handleCardClick(){// If the card is clicked, reset the button effects\nsetIsAdded(false);setIsRemoved(false);// Add a CSS class to the card when clicked\nvar cardElement=document.getElementById(\"movie-card-\".concat(movies.id));if(cardElement){cardElement.classList.add(\"clicked\");setTimeout(function(){cardElement.classList.remove(\"clicked\");},300);}};return/*#__PURE__*/_jsxs(Card,{id:\"movie-card-\".concat(movies.id),className:\"my-3 zoom my-card w-100 \".concat(isAdded?\"added\":\"\",\" \").concat(isRemoved?\"removed\":\"\"),style:{width:\"18rem\"},onClick:handleCardClick,children:[/*#__PURE__*/_jsx(\"a\",{href:toPath,children:/*#__PURE__*/_jsx(Card.Img,{className:\"card-img\",variant:\"top\",src:\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/img/\").concat(poster)})}),/*#__PURE__*/_jsxs(Card.Body,{className:\"text-center\",children:[/*#__PURE__*/_jsx(Card.Title,{children:/*#__PURE__*/_jsx(\"div\",{children:title})}),/*#__PURE__*/_jsx(Card.Text,{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"button \".concat(isFavouritePage?\"added\":\"removed\"),onClick:isFavouritePage?removeMovieFromFavourite:addMovieToFavourite,children:[isFavouritePage?\"Remove from favourite\":\"Add to favourite\",/*#__PURE__*/_jsx(\"div\",{className:\"button__horizontal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button__vertical\"})]})})]})]});};export default MovieListItem;","map":{"version":3,"sources":["E:/Full-Stack-Project/project-movie-app/client/src/component/moviesList/MovieListItem.tsx"],"names":["React","useState","Card","toast","addMovie","removeMovieById","getHigestMovieId","getMovieByTitle","MovieListItem","movies","path","onRemove","toastTimeout","isFavouritePage","title","poster","toPath","isAdded","setIsAdded","isRemoved","setIsRemoved","addMovieToFavourite","event","preventDefault","movieByTitle","error","autoClose","highestId","id","success","removeMovieFromFavourite","warn","data","handleCardClick","cardElement","document","getElementById","classList","add","setTimeout","remove","width","process","env","REACT_APP_API_BASE_URL"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { faHeart } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Button, Card } from \"react-bootstrap\";\r\nimport { toast } from \"react-toastify\";\r\nimport IMovies from \"../../model/IMovies\";\r\nimport {\r\n  addMovie,\r\n  removeMovieById,\r\n  getHigestMovieId,\r\n  getMovieByTitle,\r\n} from \"../../services/movies\";\r\nimport \"../App.css\";\r\n\r\ntype Props = {\r\n  movies: IMovies;\r\n  path: string;\r\n  onRemove: (title: string) => void;\r\n};\r\n\r\nconst MovieListItem = ({ movies, path, onRemove }: Props) => {\r\n  const toastTimeout = 1800;\r\n  const isFavouritePage = path === \"favourite\";\r\n\r\n  const { title, poster } = movies;\r\n\r\n  var toPath = `${path}/${title}`;\r\n\r\n  const [isAdded, setIsAdded] = useState(false);\r\n  const [isRemoved, setIsRemoved] = useState(false);\r\n\r\n  const addMovieToFavourite = async (\r\n    event: React.MouseEvent<HTMLButtonElement>\r\n  ) => {\r\n    event.preventDefault();\r\n    try {\r\n      const movieByTitle = await getMovieByTitle(\"favourite\", movies.title);\r\n      if (movieByTitle !== null) {\r\n        toast.error(\"Already added to Favourites...\", {\r\n          autoClose: toastTimeout,\r\n        });\r\n        return;\r\n      }\r\n\r\n      const highestId = await getHigestMovieId(\"favourite\");\r\n      movies.id = highestId + 1;\r\n      await addMovie(\"favourite\", movies);\r\n      toast.success(\"Successfully added to Favourites...\", {\r\n        autoClose: toastTimeout,\r\n      });\r\n\r\n      // Apply the 'added' class to the button and change heart color to yellow\r\n      setIsAdded(true);\r\n    } catch (errormsg: any) {\r\n      toast.error(\"Not added to Favourites...\", { autoClose: toastTimeout });\r\n    }\r\n  };\r\n\r\n  const removeMovieFromFavourite = async (\r\n    event: React.MouseEvent<HTMLButtonElement>\r\n  ) => {\r\n    event.preventDefault();\r\n    try {\r\n      if (movies.id === null) {\r\n        toast.warn(\r\n          \"Cannot find the Movie Id to remove from the favourite list...\"\r\n        );\r\n      }\r\n      const data = await removeMovieById(\"favourite\", movies.id);\r\n      toast.success(\"Successfully removed from Favourites...\", {\r\n        autoClose: toastTimeout,\r\n      });\r\n\r\n      // Apply the 'removed' class to the button and change heart color to red\r\n      setIsRemoved(true);\r\n\r\n      onRemove(movies.title);\r\n    } catch (errormsg: any) {\r\n      toast.error(\"Unable to remove from Favourites...\", {\r\n        autoClose: toastTimeout,\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleCardClick = () => {\r\n    // If the card is clicked, reset the button effects\r\n    setIsAdded(false);\r\n    setIsRemoved(false);\r\n\r\n    // Add a CSS class to the card when clicked\r\n    const cardElement = document.getElementById(`movie-card-${movies.id}`);\r\n    if (cardElement) {\r\n      cardElement.classList.add(\"clicked\");\r\n      setTimeout(() => {\r\n        cardElement.classList.remove(\"clicked\");\r\n      }, 300);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Card\r\n      id={`movie-card-${movies.id}`}\r\n      className={`my-3 zoom my-card w-100 ${isAdded ? \"added\" : \"\"} ${\r\n        isRemoved ? \"removed\" : \"\"\r\n      }`}\r\n      style={{ width: \"18rem\" }}\r\n      onClick={handleCardClick}\r\n    >\r\n      <a href={toPath}>\r\n        <Card.Img\r\n          className=\"card-img\"\r\n          variant=\"top\"\r\n          src={`${process.env.REACT_APP_API_BASE_URL}/img/${poster}`}\r\n        />\r\n      </a>\r\n      <Card.Body className=\"text-center\">\r\n        <Card.Title>\r\n          <div>{title}</div>\r\n        </Card.Title>\r\n        <Card.Text className=\"text-center\">\r\n          <button\r\n            className={`button ${isFavouritePage ? \"added\" : \"removed\"}`}\r\n            onClick={\r\n              isFavouritePage ? removeMovieFromFavourite : addMovieToFavourite\r\n            }\r\n          >\r\n            {isFavouritePage ? \"Remove from favourite\" : \"Add to favourite\"}\r\n            <div className=\"button__horizontal\"></div>\r\n            <div className=\"button__vertical\"></div>\r\n          </button>\r\n        </Card.Text>\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default MovieListItem;\r\n"]},"metadata":{},"sourceType":"module"}