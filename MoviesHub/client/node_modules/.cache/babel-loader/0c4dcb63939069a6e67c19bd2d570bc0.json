{"ast":null,"code":"import _asyncToGenerator from\"E:/Full-Stack-Project/project-movie-app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"E:/Full-Stack-Project/project-movie-app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"E:/Full-Stack-Project/project-movie-app/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"E:/Full-Stack-Project/project-movie-app/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"E:/Full-Stack-Project/project-movie-app/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"E:\\\\Full-Stack-Project\\\\project-movie-app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Component}from\"react\";import{Alert,Col,Row}from\"react-bootstrap\";import{getMovies}from\"../../services/movies\";import LoadingIndicator from\"../common/LoadingIndicator\";import NoDataMatched from\"../global/NoDataMatched\";import MovieListItem from\"./MovieListItem\";import'./search-bar.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var MoviesList=/*#__PURE__*/function(_Component){_inherits(MoviesList,_Component);var _super=_createSuper(MoviesList);function MoviesList(){var _this;_classCallCheck(this,MoviesList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={status:\"LOADING\",searchString:\"\"};_this.updateValue=function(event){var value=event.target.value;_this.setState(function(){return{searchString:value};},function(){_this.searchMovie(_this.state.searchString);});};_this.removeMovieFromFavourite=function(title){var _this$state$moviesToS;_this.setState({status:\"LOADING\"});var moviesToShow=(_this$state$moviesToS=_this.state.moviesToShow)===null||_this$state$moviesToS===void 0?void 0:_this$state$moviesToS.filter(function(movie){return movie.title!==title;});_this.setState({status:\"LOADED\",moviesToShow:moviesToShow});};_this.reloadMovieList=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var movies,moviesToShow;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({status:\"LOADING\"});_context.prev=1;_context.next=4;return getMovies(_this.props.match.params.moviesCategory);case 4:movies=_context.sent;moviesToShow=movies;_this.setState({status:\"LOADED\",movies:movies,moviesToShow:moviesToShow});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);_this.setState({status:\"LOADING_ERROR\",error:_context.t0});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return _this;}_createClass(MoviesList,[{key:\"searchMovie\",value:function searchMovie(searchString){var _this$state$movies;this.setState({status:\"LOADING\"});var moviesToShow=(_this$state$movies=this.state.movies)===null||_this$state$movies===void 0?void 0:_this$state$movies.filter(function(x){return x.title.toLowerCase().includes(searchString.toLowerCase());});this.setState({status:\"LOADED\",moviesToShow:moviesToShow});}},{key:\"render\",value:function render(){var _error$message,_this2=this;var _this$state=this.state,status=_this$state.status,moviesToShow=_this$state.moviesToShow,error=_this$state.error,searchString=_this$state.searchString;var el;switch(status){case\"LOADING\":el=/*#__PURE__*/_jsx(LoadingIndicator,{size:\"large\",message:\"We are Fetching the List of Movies. Please wait....\"});break;case\"LOADING_ERROR\":var msg=(_error$message=error===null||error===void 0?void 0:error.message)!==null&&_error$message!==void 0?_error$message:\"\";if((msg===null||msg===void 0?void 0:msg.indexOf(\"404\"))>-1){el=/*#__PURE__*/_jsx(NoDataMatched,{});}else{el=/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error===null||error===void 0?void 0:error.message});}break;case\"LOADED\":el=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"Search movie...\",value:searchString,onChange:this.updateValue}),/*#__PURE__*/_jsx(\"div\",{className:\"search\"})]}),/*#__PURE__*/_jsx(Row,{xs:2,md:3,lg:5,children:moviesToShow===null||moviesToShow===void 0?void 0:moviesToShow.map(function(movies,idx){return/*#__PURE__*/_jsx(Col,{className:\"d-flex align-items-stretch my-3\",children:/*#__PURE__*/_jsx(MovieListItem,{movies:movies,path:_this2.props.match.params.moviesCategory,onRemove:_this2.removeMovieFromFavourite})},idx);})})]});break;default:break;}return el;}},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.reloadMovieList();case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"componentDidUpdate\",value:function(){var _componentDidUpdate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(prevProps){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(this.props.match.params.moviesCategory!==prevProps.match.params.moviesCategory)){_context3.next=3;break;}_context3.next=3;return this.reloadMovieList();case 3:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidUpdate(_x){return _componentDidUpdate.apply(this,arguments);}return componentDidUpdate;}()}]);return MoviesList;}(Component);export default MoviesList;","map":{"version":3,"sources":["E:/Full-Stack-Project/project-movie-app/client/src/component/moviesList/MoviesList.tsx"],"names":["Component","Alert","Col","Row","getMovies","LoadingIndicator","NoDataMatched","MovieListItem","MoviesList","state","status","searchString","updateValue","event","value","target","setState","searchMovie","removeMovieFromFavourite","title","moviesToShow","filter","movie","reloadMovieList","props","match","params","moviesCategory","movies","error","x","toLowerCase","includes","el","msg","message","indexOf","map","idx","prevProps"],"mappings":"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","sourcesContent":["import { faSearch } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { Component } from \"react\";\r\nimport { Alert, Col, Row } from \"react-bootstrap\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport IMovies from \"../../model/IMovies\";\r\nimport { getMovies } from \"../../services/movies\";\r\nimport { LoadingStatus } from \"../../services/types\";\r\nimport LoadingIndicator from \"../common/LoadingIndicator\";\r\nimport NoDataMatched from \"../global/NoDataMatched\";\r\nimport MovieListItem from \"./MovieListItem\";\r\nimport './search-bar.css';\r\n\r\ntype State = {\r\n  status: LoadingStatus;\r\n  movies?: IMovies[];\r\n  moviesToShow?: IMovies[];\r\n  error?: Error;\r\n  searchString: string;\r\n};\r\n\r\ntype Props = {\r\n  moviesCategory: string;\r\n};\r\n\r\nclass MoviesList extends Component<RouteComponentProps<Props>, State> {\r\n  state: State = {\r\n    status: \"LOADING\",\r\n    searchString: \"\",\r\n  };\r\n\r\n  updateValue = (\r\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    const { value } = event.target;\r\n\r\n    this.setState(\r\n      () => {\r\n        return {\r\n          searchString: value,\r\n        };\r\n      },\r\n      () => {\r\n        this.searchMovie(this.state.searchString);\r\n      }\r\n    );\r\n  };\r\n\r\n  searchMovie(searchString: string) {\r\n    this.setState({\r\n      status: \"LOADING\",\r\n    });\r\n\r\n    const moviesToShow = this.state.movies?.filter((x) => {\r\n      return x.title.toLowerCase().includes(searchString.toLowerCase());\r\n    });\r\n    this.setState({\r\n      status: \"LOADED\",\r\n      moviesToShow,\r\n    });\r\n  }\r\n\r\n  removeMovieFromFavourite = (title: string) => {\r\n    this.setState({\r\n      status: \"LOADING\",\r\n    });\r\n\r\n    const moviesToShow = this.state.moviesToShow?.filter(\r\n      (movie) => movie.title !== title\r\n    );\r\n\r\n    this.setState({\r\n      status: \"LOADED\",\r\n      moviesToShow,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { status, moviesToShow, error, searchString } = this.state;\r\n\r\n    let el;\r\n\r\n    switch (status) {\r\n      case \"LOADING\":\r\n        el = (\r\n          <LoadingIndicator\r\n            size=\"large\"\r\n            message=\"We are Fetching the List of Movies. Please wait....\"\r\n          />\r\n        );\r\n        break;\r\n      case \"LOADING_ERROR\":\r\n        let msg = error?.message ?? \"\";\r\n\r\n        if (msg?.indexOf(\"404\") > -1) {\r\n          el = <NoDataMatched />;\r\n        } else {\r\n          el = <Alert variant=\"danger\">{error?.message}</Alert>;\r\n        }\r\n        break;\r\n      case \"LOADED\":\r\n        el = (\r\n          <>\r\n            <div className=\"container\">\r\n              <input\r\n                type=\"search\"\r\n                placeholder=\"Search movie...\"\r\n                value={searchString}\r\n                onChange={this.updateValue}\r\n              />\r\n              <div className=\"search\"></div>\r\n            </div>\r\n            <Row xs={2} md={3} lg={5}>\r\n              {moviesToShow?.map((movies, idx) => (\r\n                <Col key={idx} className=\"d-flex align-items-stretch my-3\">\r\n                  <MovieListItem\r\n                    movies={movies}\r\n                    path={this.props.match.params.moviesCategory}\r\n                    onRemove={this.removeMovieFromFavourite}\r\n                  />\r\n                </Col>\r\n              ))}\r\n            </Row>\r\n          </>\r\n        );\r\n\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    return el;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    await this.reloadMovieList();\r\n  }\r\n\r\n  async componentDidUpdate(prevProps: RouteComponentProps<Props>) {\r\n    if (\r\n      this.props.match.params.moviesCategory !==\r\n      prevProps.match.params.moviesCategory\r\n    ) {\r\n      await this.reloadMovieList();\r\n    }\r\n  }\r\n\r\n  reloadMovieList = async () => {\r\n    this.setState({\r\n      status: \"LOADING\",\r\n    });\r\n\r\n    try {\r\n      const movies = await getMovies(this.props.match.params.moviesCategory);\r\n      const moviesToShow = movies;\r\n      this.setState({\r\n        status: \"LOADED\",\r\n        movies,\r\n        moviesToShow,\r\n      });\r\n    } catch (error) {\r\n      this.setState({\r\n        status: \"LOADING_ERROR\",\r\n        error: error as Error,\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport default MoviesList;\r\n"]},"metadata":{},"sourceType":"module"}